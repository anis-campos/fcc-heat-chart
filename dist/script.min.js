"use strict";var dataUrl="https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/global-temperature.json";document.addEventListener("DOMContentLoaded",function(){var a=new XMLHttpRequest;a.open("GET",dataUrl,!0),a.onreadystatechange=function(){var b;4===a.readyState&&200===a.status&&(b=JSON.parse(a.responseText),setData(b))},a.send()});var gradient=["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"],months=["january","february","march","april","may","june","july","august","september","october","november","december"],h=600,w=1500,padding=100;d3.select("#holder").append("svg").attr("width",w).attr("height",h);/**
 * Api object from FCC
 * @typedef {Object} ApiModel
 * @property {Number} year     - Year of the measurement
 * @property {Number} month    - Month of the measurement
 * @property {Number} variance - Variance of temperature with base year
 */ /**
 *
 * @param {Number} baseTemp
 * @param {[ApiModel]} dataset
 */function setData(a){var b=a.baseTemperature,c=a.monthlyVariance,d=function(a){return new Date(a.year,a.month-1,1)},e=function(a){return f(a.variance)},f=function(a){return b+a},g=[d3.min(c,d),d3.max(c,d)],i=[d3.min(c,e),d3.max(c,e)];console.log(i);var j=d3.scaleTime().domain(g).range([padding,w-padding]),k=d3.scaleLinear().domain([.5,12.5]).range([padding,h-padding]),l=d3.scaleQuantile().domain(i).range(gradient),m=d3.axisBottom(j).tickSizeOuter(0).tickArguments([d3.timeYear.every(10)]),n=d3.axisLeft(k).tickSizeOuter(0)//.ticks(12)
.tickFormat(function(a,b){return months[b]}),o=(h-2*padding)/months.length;d3.select("svg").call(function(a){a.append("g").attr("id","legend").attr("transform","translate(".concat(padding,",").concat(h-padding/2,")")).call(function(a){var b=30,c=i[0],d=i[1],e=(d-c)/gradient.length,f=d3.range(c,d,e);console.log(f);var g=d3.scaleLinear().domain(i).range([0,400]),h=d3.axisBottom(g).tickSizeOuter(0).tickFormat(d3.format(".1f")).tickValues(f);a.selectAll("rect").data(f).enter().append("rect").style("fill",function(a){return l(a)}).attr("width",400/gradient.length).attr("height",b).attr("x",function(a){return g(a)}).attr("y",0),a.append("g").attr("transform","translate(0,".concat(b,")")).call(h)}),a.selectAll("rect").data(c).enter().append("rect").attr("data-month",function(a){return a.month-1}).attr("data-temp",function(a){return a.variance}).attr("data-year",function(a){return a.year}).attr("class","cell").style("fill",function(a){return l(f(a.variance))}).attr("width",5).attr("height",o).attr("x",function(a){return j(new Date(a.year,0,1))}).attr("y",function(a){return k(a.month)-o/2}),a.append("g").attr("id","x-axis").attr("transform","translate(0,".concat(h-padding,")")).call(m),a.append("g").attr("id","y-axis").attr("transform","translate(".concat(padding,",0)")).call(n),a.append("text").attr("class","axisLabel").text("Years").style("text-anchor","middle").attr("x",(w-padding)/2).attr("y",h-padding+40),a.append("text").attr("class","axisLabel").text("Months").style("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-h/2).attr("y",40)})}/**
 *
 * @param {ApiModel} d
 */function handleMouseOver(a,b){var c=d3.select(this),d=a.tooltip,e=d3.event,f=e.pageX,g=e.pageY;d.style("display","block"),d.style("left",f+20+"px"),d.html(toolTipHtml(b));var h=d.node().getBoundingClientRect().height;d.style("top",g-parseInt(h/2)+"px"),d.attr("data-year",b.Year),c.transition().duration(100).attr("r",10)}function handleMouseOut(a){var b=a.tooltip;b.style("display","none");var c=d3.select(this);c.transition().duration(100).attr("r",8)}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJkYXRhVXJsIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVxIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwianNvbiIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJzZXREYXRhIiwic2VuZCIsImdyYWRpZW50IiwibW9udGhzIiwiaCIsInciLCJwYWRkaW5nIiwiZDMiLCJzZWxlY3QiLCJhcHBlbmQiLCJhdHRyIiwiYmFzZVRlbXAiLCJiYXNlVGVtcGVyYXR1cmUiLCJkYXRhc2V0IiwibW9udGhseVZhcmlhbmNlIiwiZ2V0RGF0ZSIsIngiLCJEYXRlIiwieWVhciIsIm1vbnRoIiwiZ2V0VmFyaWFuY2UiLCJ0ZW1wZXJhdHVyZSIsInZhcmlhbmNlIiwieERvbWFpbiIsIm1pbiIsIm1heCIsInlEb21haW4iLCJjb25zb2xlIiwibG9nIiwieFNjYWxlIiwic2NhbGVUaW1lIiwiZG9tYWluIiwicmFuZ2UiLCJ5U2NhbGUiLCJzY2FsZUxpbmVhciIsImNvbG9yU2NhbGUiLCJzY2FsZVF1YW50aWxlIiwieEF4aXMiLCJheGlzQm90dG9tIiwidGlja1NpemVPdXRlciIsInRpY2tBcmd1bWVudHMiLCJ0aW1lWWVhciIsImV2ZXJ5IiwieUF4aXMiLCJheGlzTGVmdCIsInRpY2tGb3JtYXQiLCJ2YWwiLCJpbmRleCIsImNlbGxIZWlnaHQiLCJsZW5ndGgiLCJjYWxsIiwic3ZnIiwiZyIsImhlaWdodCIsInN0ZXAiLCJsZWdlbmRTY2FsZSIsImF4aXMiLCJmb3JtYXQiLCJ0aWNrVmFsdWVzIiwic2VsZWN0QWxsIiwiZGF0YSIsImVudGVyIiwic3R5bGUiLCJkIiwidGV4dCIsImhhbmRsZU1vdXNlT3ZlciIsImFyZ3MiLCJkb3QiLCJ0b29sdGlwIiwiZXZlbnQiLCJwYWdlWCIsInkiLCJwYWdlWSIsImh0bWwiLCJ0b29sVGlwSHRtbCIsIm5vZGUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwYXJzZUludCIsIlllYXIiLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJoYW5kbGVNb3VzZU91dCJdLCJtYXBwaW5ncyI6ImFBRUEsR0FBTUEsQ0FBQUEsT0FBTyxDQUFHLG9HQUFoQixDQUNBQyxRQUFRLENBQUNDLGdCQUFULENBQTBCLGtCQUExQixDQUE4QyxVQUFZLENBQ3RELEdBQU1DLENBQUFBLENBQUcsQ0FBRyxHQUFJQyxDQUFBQSxjQUFoQixDQUNBRCxDQUFHLENBQUNFLElBQUosQ0FBUyxLQUFULENBQWdCTCxPQUFoQixJQUZzRCxDQUd0REcsQ0FBRyxDQUFDRyxrQkFBSixDQUF5QixVQUFZLENBQ2pDLEdBQUlDLENBQUFBLENBQUosQ0FDdUIsQ0FBbkIsR0FBQUosQ0FBRyxDQUFDSyxVQUFKLEVBQXVDLEdBQWYsR0FBQUwsQ0FBRyxDQUFDTSxNQUZDLEdBRzdCRixDQUFJLENBQUdHLElBQUksQ0FBQ0MsS0FBTCxDQUFXUixDQUFHLENBQUNTLFlBQWYsQ0FIc0IsQ0FJN0JDLE9BQU8sQ0FBQ04sQ0FBRCxDQUpzQixDQU1wQyxDQVRxRCxDQVV0REosQ0FBRyxDQUFDVyxJQUFKLEVBQ0gsQ0FYRCxDLElBYU1DLENBQUFBLFFBQVEsQ0FBRyxDQUFDLFNBQUQsQ0FBWSxTQUFaLENBQXVCLFNBQXZCLENBQWtDLFNBQWxDLENBQTZDLFNBQTdDLENBQXdELFNBQXhELENBQW1FLFNBQW5FLENBQThFLFNBQTlFLENBQXlGLFNBQXpGLENBQW9HLFNBQXBHLENBQStHLFNBQS9HLEMsQ0FDWEMsTUFBTSxDQUFHLENBQUMsU0FBRCxDQUFZLFVBQVosQ0FBd0IsT0FBeEIsQ0FBaUMsT0FBakMsQ0FBMEMsS0FBMUMsQ0FBaUQsTUFBakQsQ0FBeUQsTUFBekQsQ0FBaUUsUUFBakUsQ0FBMkUsV0FBM0UsQ0FBd0YsU0FBeEYsQ0FBbUcsVUFBbkcsQ0FBK0csVUFBL0csQyxDQUVUQyxDQUFDLENBQUcsRyxDQUFLQyxDQUFDLENBQUcsSSxDQUFNQyxP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LENBRUgiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBkMyBmcm9tIFwiQHR5cGVzL2QzXCI7XG5cbmNvbnN0IGRhdGFVcmwgPSBcImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9mcmVlQ29kZUNhbXAvUHJvamVjdFJlZmVyZW5jZURhdGEvbWFzdGVyL2dsb2JhbC10ZW1wZXJhdHVyZS5qc29uXCI7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgcmVxLm9wZW4oJ0dFVCcsIGRhdGFVcmwsIHRydWUpO1xuICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBqc29uO1xuICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT09IDQgJiYgcmVxLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICBqc29uID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIHNldERhdGEoanNvbilcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmVxLnNlbmQoKTtcbn0pO1xuXG5jb25zdCBncmFkaWVudCA9IFtcIiMzMTM2OTVcIiwgXCIjNDU3NWI0XCIsIFwiIzc0YWRkMVwiLCBcIiNhYmQ5ZTlcIiwgXCIjZTBmM2Y4XCIsIFwiI2ZmZmZiZlwiLCBcIiNmZWUwOTBcIiwgXCIjZmRhZTYxXCIsIFwiI2Y0NmQ0M1wiLCBcIiNkNzMwMjdcIiwgXCIjYTUwMDI2XCJdO1xuY29uc3QgbW9udGhzID0gW1wiamFudWFyeVwiLCBcImZlYnJ1YXJ5XCIsIFwibWFyY2hcIiwgXCJhcHJpbFwiLCBcIm1heVwiLCBcImp1bmVcIiwgXCJqdWx5XCIsIFwiYXVndXN0XCIsIFwic2VwdGVtYmVyXCIsIFwib2N0b2JlclwiLCBcIm5vdmVtYmVyXCIsIFwiZGVjZW1iZXJcIl07XG5cbmNvbnN0IGggPSA2MDAsIHcgPSAxNTAwLCBwYWRkaW5nID0gMTAwO1xuXG5kMy5zZWxlY3QoJyNob2xkZXInKVxuICAgIC5hcHBlbmQoJ3N2ZycpXG4gICAgLmF0dHIoJ3dpZHRoJywgdylcbiAgICAuYXR0cignaGVpZ2h0JywgaCk7XG5cbi8qKlxuICogQXBpIG9iamVjdCBmcm9tIEZDQ1xuICogQHR5cGVkZWYge09iamVjdH0gQXBpTW9kZWxcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSB5ZWFyICAgICAtIFllYXIgb2YgdGhlIG1lYXN1cmVtZW50XG4gKiBAcHJvcGVydHkge051bWJlcn0gbW9udGggICAgLSBNb250aCBvZiB0aGUgbWVhc3VyZW1lbnRcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSB2YXJpYW5jZSAtIFZhcmlhbmNlIG9mIHRlbXBlcmF0dXJlIHdpdGggYmFzZSB5ZWFyXG4gKi9cblxuLyoqXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGJhc2VUZW1wXG4gKiBAcGFyYW0ge1tBcGlNb2RlbF19IGRhdGFzZXRcbiAqL1xuZnVuY3Rpb24gc2V0RGF0YSh7YmFzZVRlbXBlcmF0dXJlOiBiYXNlVGVtcCwgbW9udGhseVZhcmlhbmNlOiBkYXRhc2V0fSkge1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcGlNb2RlbH0geFxuICAgICAqIEByZXR1cm4ge0RhdGV9XG4gICAgICovXG4gICAgY29uc3QgZ2V0RGF0ZSA9IHggPT4gbmV3IERhdGUoeC55ZWFyLCB4Lm1vbnRoIC0gMSwgMSk7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FwaU1vZGVsfSB4XG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqL1xuICAgIGNvbnN0IGdldFZhcmlhbmNlID0geCA9PiB0ZW1wZXJhdHVyZSh4LnZhcmlhbmNlKTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHhcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICovXG4gICAgY29uc3QgdGVtcGVyYXR1cmUgPSB4ID0+IGJhc2VUZW1wICsgeDtcblxuXG4gICAgY29uc3QgeERvbWFpbiA9IFtkMy5taW4oZGF0YXNldCwgZ2V0RGF0ZSksIGQzLm1heChkYXRhc2V0LCBnZXREYXRlKV07XG5cbiAgICBjb25zdCB5RG9tYWluID0gW2QzLm1pbihkYXRhc2V0LCBnZXRWYXJpYW5jZSksIGQzLm1heChkYXRhc2V0LCBnZXRWYXJpYW5jZSldO1xuICAgIGNvbnNvbGUubG9nKHlEb21haW4pO1xuXG4gICAgY29uc3QgeFNjYWxlID0gZDMuc2NhbGVUaW1lKClcbiAgICAgICAgLmRvbWFpbih4RG9tYWluKVxuICAgICAgICAucmFuZ2UoW3BhZGRpbmcsIHcgLSBwYWRkaW5nXSk7XG5cbiAgICBjb25zdCB5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgICAgIC5kb21haW4oWzAuNSwgMTIuNV0pXG4gICAgICAgIC5yYW5nZShbcGFkZGluZywgaCAtIHBhZGRpbmddKTtcblxuICAgIGNvbnN0IGNvbG9yU2NhbGUgPSBkMy5zY2FsZVF1YW50aWxlKClcbiAgICAgICAgLmRvbWFpbih5RG9tYWluKVxuICAgICAgICAucmFuZ2UoZ3JhZGllbnQpO1xuXG5cbiAgICBjb25zdCB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeFNjYWxlKVxuICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMClcbiAgICAgICAgICAgIC50aWNrQXJndW1lbnRzKFtkMy50aW1lWWVhci5ldmVyeSgxMCldKSxcblxuICAgICAgICB5QXhpcyA9IGQzLmF4aXNMZWZ0KHlTY2FsZSlcbiAgICAgICAgICAgIC50aWNrU2l6ZU91dGVyKDApXG4gICAgICAgICAgICAvLy50aWNrcygxMilcbiAgICAgICAgICAgIC50aWNrRm9ybWF0KCh2YWwsIGluZGV4KSA9PiBtb250aHNbaW5kZXhdKTtcblxuXG4gICAgY29uc3QgY2VsbEhlaWdodCA9IChoIC0gMiAqIHBhZGRpbmcpIC8gbW9udGhzLmxlbmd0aDtcbiAgICBjb25zdCBjZWxsT2Zmc2V0ID0gY2VsbEhlaWdodCAvIDI7XG5cblxuICAgIGQzLnNlbGVjdCgnc3ZnJykuY2FsbChzdmcgPT4ge1xuXG4gICAgICAgIHN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBcImxlZ2VuZFwiKVxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHtwYWRkaW5nfSwke2ggLSBwYWRkaW5nIC8gMn0pYClcbiAgICAgICAgICAgIC5jYWxsKChnKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2lkdGggPSA0MDA7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gMzA7XG4gICAgICAgICAgICAgICAgY29uc3QgbWluID0geURvbWFpblswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXggPSB5RG9tYWluWzFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSAobWF4IC0gbWluKSAvIGdyYWRpZW50Lmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gZDMucmFuZ2UobWluLCBtYXgsIHN0ZXApO1xuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmFuZ2UpXG5cbiAgICAgICAgICAgICAgICBjb25zdCBsZWdlbmRTY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAgICAgICAgICAgICAgICAgLmRvbWFpbih5RG9tYWluKVxuICAgICAgICAgICAgICAgICAgICAucmFuZ2UoWzAsIHdpZHRoXSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBheGlzID0gZDMuYXhpc0JvdHRvbShsZWdlbmRTY2FsZSlcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMClcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoZDMuZm9ybWF0KFwiLjFmXCIpKVxuICAgICAgICAgICAgICAgICAgICAudGlja1ZhbHVlcyhyYW5nZSlcbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoJ3JlY3QnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShyYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGQgPT4gY29sb3JTY2FsZShkKSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGggLyBncmFkaWVudC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgeCA9PiBsZWdlbmRTY2FsZSh4KSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAwKVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBnLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoMCwke2hlaWdodH0pYClcbiAgICAgICAgICAgICAgICAgICAgLmNhbGwoYXhpcylcbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcblxuICAgICAgICBzdmcuc2VsZWN0QWxsKCdyZWN0JylcbiAgICAgICAgICAgIC5kYXRhKGRhdGFzZXQpXG4gICAgICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAgICAgICAuYXR0cignZGF0YS1tb250aCcsIGQgPT4gZC5tb250aCAtIDEpXG4gICAgICAgICAgICAuYXR0cignZGF0YS10ZW1wJywgZCA9PiBkLnZhcmlhbmNlKVxuICAgICAgICAgICAgLmF0dHIoJ2RhdGEteWVhcicsIGQgPT4gZC55ZWFyKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgXCJjZWxsXCIpXG4gICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGNvbG9yU2NhbGUodGVtcGVyYXR1cmUoZC52YXJpYW5jZSkpKVxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgNSlcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBjZWxsSGVpZ2h0KVxuICAgICAgICAgICAgLmF0dHIoJ3gnLCBkID0+IHhTY2FsZShuZXcgRGF0ZShkLnllYXIsIDAsIDEpKSlcbiAgICAgICAgICAgIC5hdHRyKCd5JywgZCA9PiB5U2NhbGUoZC5tb250aCkgLSBjZWxsT2Zmc2V0KVxuICAgICAgICA7XG5cbiAgICAgICAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICd4LWF4aXMnKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgwLCR7aCAtIHBhZGRpbmd9KWApXG4gICAgICAgICAgICAuY2FsbCh4QXhpcyk7XG5cbiAgICAgICAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICd5LWF4aXMnKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgke3BhZGRpbmd9LDApYClcbiAgICAgICAgICAgIC5jYWxsKHlBeGlzKTtcblxuICAgICAgICBzdmcuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImF4aXNMYWJlbFwiKVxuICAgICAgICAgICAgLnRleHQoJ1llYXJzJylcbiAgICAgICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgKHcgLSBwYWRkaW5nKSAvIDIpXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgaCAtIHBhZGRpbmcgKyA0MCk7XG5cbiAgICAgICAgc3ZnLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJheGlzTGFiZWxcIilcbiAgICAgICAgICAgIC50ZXh0KCdNb250aHMnKVxuICAgICAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGByb3RhdGUoLTkwKWApXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgLWggLyAyKVxuICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIDQwKTtcblxuXG4gICAgfSk7XG5cblxuICAgIC8vIGNvbnN0IGRhdGEgPSB7dG9vbHRpcDogZDMuc2VsZWN0KCcjdG9vbHRpcCcpLCB4U2NhbGUsIHlTY2FsZX07XG4gICAgLy9cblxuICAgIC8vIC5vbignbW91c2VvdmVyJywgd3JhcChoYW5kbGVNb3VzZU92ZXIsIGRhdGEpKVxuICAgIC8vIC5vbignbW91c2VvdXQnLCB3cmFwKGhhbmRsZU1vdXNlT3V0LCBkYXRhKSk7XG59XG5cblxuLyoqXG4gKlxuICogQHBhcmFtIHtBcGlNb2RlbH0gZFxuICovXG5mdW5jdGlvbiBoYW5kbGVNb3VzZU92ZXIoYXJncywgZCkge1xuICAgIGNvbnN0IGRvdCA9IGQzLnNlbGVjdCh0aGlzKTtcbiAgICBjb25zdCB7dG9vbHRpcH0gPSBhcmdzO1xuICAgIGNvbnN0IHtwYWdlWDogeCwgcGFnZVk6IHl9ID0gZDMuZXZlbnQ7XG4gICAgdG9vbHRpcC5zdHlsZShcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICB0b29sdGlwLnN0eWxlKFwibGVmdFwiLCB4ICsgMjAgKyBcInB4XCIpO1xuICAgIHRvb2x0aXAuaHRtbCh0b29sVGlwSHRtbChkKSk7XG4gICAgY29uc3QgaGVpZ2h0ID0gdG9vbHRpcC5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgIHRvb2x0aXAuc3R5bGUoXCJ0b3BcIiwgeSAtIHBhcnNlSW50KGhlaWdodCAvIDIpICsgXCJweFwiKTtcbiAgICB0b29sdGlwLmF0dHIoJ2RhdGEteWVhcicsIGQuWWVhcik7XG5cblxuICAgIGRvdC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTAwKS5hdHRyKCdyJywgMTApO1xuXG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1vdXNlT3V0KGFyZ3MpIHtcbiAgICBjb25zdCB7dG9vbHRpcH0gPSBhcmdzO1xuICAgIHRvb2x0aXAuc3R5bGUoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcblxuICAgIGNvbnN0IGRvdCA9IGQzLnNlbGVjdCh0aGlzKTtcbiAgICBkb3QudHJhbnNpdGlvbigpLmR1cmF0aW9uKDEwMCkuYXR0cigncicsIDgpO1xuXG59XG4iXX0=