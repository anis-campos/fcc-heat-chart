"use strict";var dataUrl="https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/global-temperature.json";document.addEventListener("DOMContentLoaded",function(){var a=new XMLHttpRequest;a.open("GET",dataUrl,!0),a.onreadystatechange=function(){var b;4===a.readyState&&200===a.status&&(b=JSON.parse(a.responseText),setData(b))},a.send()});var gradient=["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"],months=["january","february","march","april","may","june","july","august","september","october","november","december"],h=600,w=1500,padding=100;d3.select("#holder").append("svg").attr("width",w).attr("height",h);/**
 * Api object from FCC
 * @typedef {Object} ApiModel
 * @property {Number} year     - Year of the measurement
 * @property {Number} month    - Month of the measurement
 * @property {Number} variance - Variance of temperature with base year
 */ /**
 *
 * @param {Number} baseTemp
 * @param {[ApiModel]} dataset
 */function setData(a){var b=a.baseTemperature,c=a.monthlyVariance,d=function(a){return new Date(a.year,a.month-1,1)},e=function(a){return f(a.variance)},f=function(a){return b+a},g=function(a){var b=Math.pow,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return Math.round(a*b(10,c))/b(10,c)},i=[d3.min(c,d),d3.max(c,d)],j=[d3.min(c,e),d3.max(c,e)];d3.select("#description").text("".concat(i[0].getFullYear()," - ").concat(i[1].getFullYear(),": base temperature ").concat(b,"\u2103"));var k=d3.scaleTime().domain(i).range([padding,w-padding]),l=d3.scaleLinear().domain([.5,12.5]).range([0,h-2*padding]),m=d3.scaleQuantile().domain(j).range(gradient),n=d3.axisBottom(k).tickSizeOuter(0).tickArguments([d3.timeYear.every(10)]),o=d3.axisLeft(l).tickSizeOuter(0)//.ticks(12)
.tickFormat(function(a,b){return months[b]}),p=(h-2*padding)/months.length,q=d3.select("#tooltip");d3.select("svg").call(function(a){a.selectAll("rect").data(c).enter().append("rect").attr("data-month",function(a){return a.month-1}).attr("data-temp",function(a){return a.variance}).attr("data-year",function(a){return a.year}).attr("class","cell").style("fill",function(a){return m(f(a.variance))}).attr("width",5).attr("height",p).attr("x",function(a){return k(new Date(a.year,0,1))}).attr("y",function(a){return l(a.month)-p/2}).on("mouseover",function(a){var c=d3.event,d=c.pageX,e=c.pageY;q.style("display","block"),q.style("left",d+20+"px");var f=g(a.variance);q.html("".concat(a.year," - ").concat(months[a.month-1],"<BR>").concat(g(b+a.variance),"\u2103<BR> ").concat(0<f?"+":"").concat(f,"\u2103"));var h=q.node().getBoundingClientRect().height;q.style("top",e-parseInt(h/2)+"px"),q.attr("data-year",a.year)}).on("mouseout",function(){q.style("display","none")}),a.append("g").attr("id","legend").attr("transform","translate(".concat(padding,",").concat(h-padding,")")).call(function(a){var b=30,c=j[0],d=j[1],e=(d-c)/gradient.length,f=d3.range(c,d,e).map(function(a){return g(a)});console.log(f);var h=d3.scaleLinear().domain([c,d]).range([0,400]),i=d3.axisBottom(h).tickSizeOuter(0).tickFormat(d3.format(".1f")).tickValues(f.slice(1));a.selectAll("rect").data(f).enter().append("rect").style("fill",function(a){return m(a)}).attr("width",function(a,b){return(h(f[b+1])||400)-h(a)}).attr("height",b).attr("x",function(a){return h(a)}).attr("y",0),a.append("g").attr("transform","translate(-0.5,".concat(b,")")).call(i)}),a.append("g").attr("id","x-axis").attr("transform","translate(0,".concat(h-2*padding,")")).call(n),a.append("g").attr("id","y-axis").attr("transform","translate(".concat(padding,",0)")).call(o),a.append("text").attr("class","axisLabel").text("Years").style("text-anchor","middle").attr("x",(w-padding)/2).attr("y",h-2*padding+40),a.append("text").attr("class","axisLabel").text("Months").style("text-anchor","middle").attr("transform","rotate(-90)").attr("x",-(h-2*padding)/2).attr("y",40)})}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJkYXRhVXJsIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVxIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwianNvbiIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJzZXREYXRhIiwic2VuZCIsImdyYWRpZW50IiwibW9udGhzIiwiaCIsInciLCJwYWRkaW5nIiwiZDMiLCJzZWxlY3QiLCJhcHBlbmQiLCJhdHRyIiwiYmFzZVRlbXAiLCJiYXNlVGVtcGVyYXR1cmUiLCJkYXRhc2V0IiwibW9udGhseVZhcmlhbmNlIiwiZ2V0RGF0ZSIsIngiLCJEYXRlIiwieWVhciIsIm1vbnRoIiwiZ2V0VmFyaWFuY2UiLCJ0ZW1wZXJhdHVyZSIsInZhcmlhbmNlIiwicHJlY2lzaW9uIiwiTWF0aCIsInBvdyIsImRlY2ltYWwiLCJyb3VuZCIsInhEb21haW4iLCJtaW4iLCJtYXgiLCJ5RG9tYWluIiwidGV4dCIsImdldEZ1bGxZZWFyIiwieFNjYWxlIiwic2NhbGVUaW1lIiwiZG9tYWluIiwicmFuZ2UiLCJ5U2NhbGUiLCJzY2FsZUxpbmVhciIsImNvbG9yU2NhbGUiLCJzY2FsZVF1YW50aWxlIiwieEF4aXMiLCJheGlzQm90dG9tIiwidGlja1NpemVPdXRlciIsInRpY2tBcmd1bWVudHMiLCJ0aW1lWWVhciIsImV2ZXJ5IiwieUF4aXMiLCJheGlzTGVmdCIsInRpY2tGb3JtYXQiLCJ2YWwiLCJpbmRleCIsImNlbGxIZWlnaHQiLCJsZW5ndGgiLCJ0b29sdGlwIiwiY2FsbCIsInN2ZyIsInNlbGVjdEFsbCIsImRhdGEiLCJlbnRlciIsImQiLCJzdHlsZSIsIm9uIiwiZXZlbnQiLCJwYWdlWCIsInkiLCJwYWdlWSIsInYiLCJodG1sIiwiaGVpZ2h0Iiwibm9kZSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInBhcnNlSW50IiwiZyIsInN0ZXAiLCJtYXAiLCJjb25zb2xlIiwibG9nIiwibGVnZW5kU2NhbGUiLCJheGlzIiwiZm9ybWF0IiwidGlja1ZhbHVlcyIsInNsaWNlIiwiaSJdLCJtYXBwaW5ncyI6ImFBRUEsR0FBTUEsQ0FBQUEsT0FBTyxDQUFHLG9HQUFoQixDQUNBQyxRQUFRLENBQUNDLGdCQUFULENBQTBCLGtCQUExQixDQUE4QyxVQUFZLENBQ3RELEdBQU1DLENBQUFBLENBQUcsQ0FBRyxHQUFJQyxDQUFBQSxjQUFoQixDQUNBRCxDQUFHLENBQUNFLElBQUosQ0FBUyxLQUFULENBQWdCTCxPQUFoQixJQUZzRCxDQUd0REcsQ0FBRyxDQUFDRyxrQkFBSixDQUF5QixVQUFZLENBQ2pDLEdBQUlDLENBQUFBLENBQUosQ0FDdUIsQ0FBbkIsR0FBQUosQ0FBRyxDQUFDSyxVQUFKLEVBQXVDLEdBQWYsR0FBQUwsQ0FBRyxDQUFDTSxNQUZDLEdBRzdCRixDQUFJLENBQUdHLElBQUksQ0FBQ0MsS0FBTCxDQUFXUixDQUFHLENBQUNTLFlBQWYsQ0FIc0IsQ0FJN0JDLE9BQU8sQ0FBQ04sQ0FBRCxDQUpzQixDQU1wQyxDQVRxRCxDQVV0REosQ0FBRyxDQUFDVyxJQUFKLEVBQ0gsQ0FYRCxDLElBYU1DLENBQUFBLFFBQVEsQ0FBRyxDQUFDLFNBQUQsQ0FBWSxTQUFaLENBQXVCLFNBQXZCLENBQWtDLFNBQWxDLENBQTZDLFNBQTdDLENBQXdELFNBQXhELENBQW1FLFNBQW5FLENBQThFLFNBQTlFLENBQXlGLFNBQXpGLENBQW9HLFNBQXBHLENBQStHLFNBQS9HLEMsQ0FDWEMsTUFBTSxDQUFHLENBQUMsU0FBRCxDQUFZLFVBQVosQ0FBd0IsT0FBeEIsQ0FBaUMsT0FBakMsQ0FBMEMsS0FBMUMsQ0FBaUQsTUFBakQsQ0FBeUQsTUFBekQsQ0FBaUUsUUFBakUsQ0FBMkUsV0FBM0UsQ0FBd0YsU0FBeEYsQ0FBbUcsVUFBbkcsQ0FBK0csVUFBL0csQyxDQUVUQyxDQUFDLENBQUcsRyxDQUFLQyxDQUFDLENBQUcsSSxDQUFNQyxPQUFPLENBQUcs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QUVLc0IsSUFGTCxDQUVVLE9BRlYsRUFHSzhCLEtBSEwsQ0FHVyxhQUhYLENBRzBCLFFBSDFCLEVBSUtwRCxJQUpMLENBSVUsR0FKVixDQUllLENBQUNMLENBQUMsQ0FBR0MsT0FBTCxFQUFnQixDQUovQixFQUtLSSxJQUxMLENBS1UsR0FMVixDQUtlTixDQUFDLENBQWEsQ0FBVixDQUFBRSxPQUFKLENBQWtCLEVBTGpDLENBakZ5QixDQXdGekJtRCxDQUFHLENBQUNoRCxNQUFKLENBQVcsTUFBWCxFQUNLQyxJQURMLENBQ1UsT0FEVixDQUNtQixXQURuQixFQUVLc0IsSUFGTCxDQUVVLFFBRlYsRUFHSzhCLEtBSEwsQ0FHVyxhQUhYLENBRzBCLFFBSDFCLEVBSUtwRCxJQUpMLENBSVUsV0FKVixnQkFLS0EsSUFMTCxDQUtVLEdBTFYsQ0FLZSxFQUFFTixDQUFDLENBQWEsQ0FBVixDQUFBRSxPQUFOLEVBQXFCLENBTHBDLEVBTUtJLElBTkwsQ0FNVSxHQU5WLENBTWUsRUFOZixDQVNILENBakdELENBb0dIIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZDMgZnJvbSBcIkB0eXBlcy9kM1wiO1xuXG5jb25zdCBkYXRhVXJsID0gXCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZnJlZUNvZGVDYW1wL1Byb2plY3RSZWZlcmVuY2VEYXRhL21hc3Rlci9nbG9iYWwtdGVtcGVyYXR1cmUuanNvblwiO1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHJlcS5vcGVuKCdHRVQnLCBkYXRhVXJsLCB0cnVlKTtcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQganNvbjtcbiAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09PSA0ICYmIHJlcS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAganNvbiA9IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICBzZXREYXRhKGpzb24pXG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJlcS5zZW5kKCk7XG59KTtcblxuY29uc3QgZ3JhZGllbnQgPSBbXCIjMzEzNjk1XCIsIFwiIzQ1NzViNFwiLCBcIiM3NGFkZDFcIiwgXCIjYWJkOWU5XCIsIFwiI2UwZjNmOFwiLCBcIiNmZmZmYmZcIiwgXCIjZmVlMDkwXCIsIFwiI2ZkYWU2MVwiLCBcIiNmNDZkNDNcIiwgXCIjZDczMDI3XCIsIFwiI2E1MDAyNlwiXTtcbmNvbnN0IG1vbnRocyA9IFtcImphbnVhcnlcIiwgXCJmZWJydWFyeVwiLCBcIm1hcmNoXCIsIFwiYXByaWxcIiwgXCJtYXlcIiwgXCJqdW5lXCIsIFwianVseVwiLCBcImF1Z3VzdFwiLCBcInNlcHRlbWJlclwiLCBcIm9jdG9iZXJcIiwgXCJub3ZlbWJlclwiLCBcImRlY2VtYmVyXCJdO1xuXG5jb25zdCBoID0gNjAwLCB3ID0gMTUwMCwgcGFkZGluZyA9IDEwMDtcblxuZDMuc2VsZWN0KCcjaG9sZGVyJylcbiAgICAuYXBwZW5kKCdzdmcnKVxuICAgIC5hdHRyKCd3aWR0aCcsIHcpXG4gICAgLmF0dHIoJ2hlaWdodCcsIGgpO1xuXG4vKipcbiAqIEFwaSBvYmplY3QgZnJvbSBGQ0NcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFwaU1vZGVsXG4gKiBAcHJvcGVydHkge051bWJlcn0geWVhciAgICAgLSBZZWFyIG9mIHRoZSBtZWFzdXJlbWVudFxuICogQHByb3BlcnR5IHtOdW1iZXJ9IG1vbnRoICAgIC0gTW9udGggb2YgdGhlIG1lYXN1cmVtZW50XG4gKiBAcHJvcGVydHkge051bWJlcn0gdmFyaWFuY2UgLSBWYXJpYW5jZSBvZiB0ZW1wZXJhdHVyZSB3aXRoIGJhc2UgeWVhclxuICovXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBiYXNlVGVtcFxuICogQHBhcmFtIHtbQXBpTW9kZWxdfSBkYXRhc2V0XG4gKi9cbmZ1bmN0aW9uIHNldERhdGEoe2Jhc2VUZW1wZXJhdHVyZTogYmFzZVRlbXAsIG1vbnRobHlWYXJpYW5jZTogZGF0YXNldH0pIHtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXBpTW9kZWx9IHhcbiAgICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgICAqL1xuICAgIGNvbnN0IGdldERhdGUgPSB4ID0+IG5ldyBEYXRlKHgueWVhciwgeC5tb250aCAtIDEsIDEpO1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcGlNb2RlbH0geFxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKi9cbiAgICBjb25zdCBnZXRWYXJpYW5jZSA9IHggPT4gdGVtcGVyYXR1cmUoeC52YXJpYW5jZSk7XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB4XG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqL1xuICAgIGNvbnN0IHRlbXBlcmF0dXJlID0geCA9PiBiYXNlVGVtcCArIHg7XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlY2ltYWxcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgY29uc3QgcHJlY2lzaW9uID0gKHgsIGRlY2ltYWwgPSAxKSA9PiBNYXRoLnJvdW5kKHggKiBNYXRoLnBvdygxMCwgZGVjaW1hbCkpIC8gTWF0aC5wb3coMTAsIGRlY2ltYWwpO1xuXG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEB0eXBlIHtEYXRlW119XG4gICAgICovXG4gICAgY29uc3QgeERvbWFpbiA9IFtkMy5taW4oZGF0YXNldCwgZ2V0RGF0ZSksIGQzLm1heChkYXRhc2V0LCBnZXREYXRlKV07XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEB0eXBlIHtOdW1iZXJbXX1cbiAgICAgKi9cbiAgICBjb25zdCB5RG9tYWluID0gW2QzLm1pbihkYXRhc2V0LCBnZXRWYXJpYW5jZSksIGQzLm1heChkYXRhc2V0LCBnZXRWYXJpYW5jZSldO1xuXG4gICAgZDMuc2VsZWN0KFwiI2Rlc2NyaXB0aW9uXCIpLnRleHQoYCR7eERvbWFpblswXS5nZXRGdWxsWWVhcigpfSAtICR7eERvbWFpblsxXS5nZXRGdWxsWWVhcigpfTogYmFzZSB0ZW1wZXJhdHVyZSAke2Jhc2VUZW1wfeKEg2ApO1xuXG4gICAgY29uc3QgeFNjYWxlID0gZDMuc2NhbGVUaW1lKClcbiAgICAgICAgLmRvbWFpbih4RG9tYWluKVxuICAgICAgICAucmFuZ2UoW3BhZGRpbmcsIHcgLSBwYWRkaW5nXSk7XG5cbiAgICBjb25zdCB5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgICAgIC5kb21haW4oWzAuNSwgMTIuNV0pXG4gICAgICAgIC5yYW5nZShbMCwgaCAtIHBhZGRpbmcgKiAyXSk7XG5cbiAgICBjb25zdCBjb2xvclNjYWxlID0gZDMuc2NhbGVRdWFudGlsZSgpXG4gICAgICAgIC5kb21haW4oeURvbWFpbilcbiAgICAgICAgLnJhbmdlKGdyYWRpZW50KTtcblxuXG4gICAgY29uc3QgeEF4aXMgPSBkMy5heGlzQm90dG9tKHhTY2FsZSlcbiAgICAgICAgICAgIC50aWNrU2l6ZU91dGVyKDApXG4gICAgICAgICAgICAudGlja0FyZ3VtZW50cyhbZDMudGltZVllYXIuZXZlcnkoMTApXSksXG5cbiAgICAgICAgeUF4aXMgPSBkMy5heGlzTGVmdCh5U2NhbGUpXG4gICAgICAgICAgICAudGlja1NpemVPdXRlcigwKVxuICAgICAgICAgICAgLy8udGlja3MoMTIpXG4gICAgICAgICAgICAudGlja0Zvcm1hdCgodmFsLCBpbmRleCkgPT4gbW9udGhzW2luZGV4XSk7XG5cblxuICAgIGNvbnN0IGNlbGxIZWlnaHQgPSAoaCAtIDIgKiBwYWRkaW5nKSAvIG1vbnRocy5sZW5ndGg7XG4gICAgY29uc3QgY2VsbE9mZnNldCA9IGNlbGxIZWlnaHQgLyAyO1xuXG4gICAgY29uc3QgdG9vbHRpcCA9IGQzLnNlbGVjdCgnI3Rvb2x0aXAnKTtcblxuICAgIGQzLnNlbGVjdCgnc3ZnJykuY2FsbChzdmcgPT4ge1xuXG5cbiAgICAgICAgc3ZnLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAgICAgICAuZGF0YShkYXRhc2V0KVxuICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAgICAgLmF0dHIoJ2RhdGEtbW9udGgnLCBkID0+IGQubW9udGggLSAxKVxuICAgICAgICAgICAgLmF0dHIoJ2RhdGEtdGVtcCcsIGQgPT4gZC52YXJpYW5jZSlcbiAgICAgICAgICAgIC5hdHRyKCdkYXRhLXllYXInLCBkID0+IGQueWVhcilcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsIFwiY2VsbFwiKVxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZCA9PiBjb2xvclNjYWxlKHRlbXBlcmF0dXJlKGQudmFyaWFuY2UpKSlcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIDUpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgY2VsbEhlaWdodClcbiAgICAgICAgICAgIC5hdHRyKCd4JywgZCA9PiB4U2NhbGUobmV3IERhdGUoZC55ZWFyLCAwLCAxKSkpXG4gICAgICAgICAgICAuYXR0cigneScsIGQgPT4geVNjYWxlKGQubW9udGgpIC0gY2VsbE9mZnNldClcbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgKGQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7cGFnZVg6IHgsIHBhZ2VZOiB5fSA9IGQzLmV2ZW50O1xuICAgICAgICAgICAgICAgIHRvb2x0aXAuc3R5bGUoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5zdHlsZShcImxlZnRcIiwgeCArIDIwICsgXCJweFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2ID0gcHJlY2lzaW9uKGQudmFyaWFuY2UpO1xuICAgICAgICAgICAgICAgIHRvb2x0aXAuaHRtbChgJHtkLnllYXJ9IC0gJHttb250aHNbZC5tb250aCAtIDFdfTxCUlxcPiR7cHJlY2lzaW9uKGJhc2VUZW1wICsgZC52YXJpYW5jZSl94oSDPEJSXFw+ICR7diA+IDAgPyAnKycgOiAnJ30ke3Z94oSDYCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gdG9vbHRpcC5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRvb2x0aXAuc3R5bGUoXCJ0b3BcIiwgeSAtIHBhcnNlSW50KGhlaWdodCAvIDIpICsgXCJweFwiKTtcbiAgICAgICAgICAgICAgICB0b29sdGlwLmF0dHIoJ2RhdGEteWVhcicsIGQueWVhcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0b29sdGlwLnN0eWxlKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIHN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBcImxlZ2VuZFwiKVxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHtwYWRkaW5nfSwke2ggLSBwYWRkaW5nfSlgKVxuICAgICAgICAgICAgLmNhbGwoKGcpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB3aWR0aCA9IDQwMDtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSAzMDtcbiAgICAgICAgICAgICAgICBjb25zdCBtaW4gPSB5RG9tYWluWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1heCA9IHlEb21haW5bMV07XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcCA9IChtYXggLSBtaW4pIC8gZ3JhZGllbnQubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSBkMy5yYW5nZShtaW4sIG1heCwgc3RlcCkubWFwKHggPT4gcHJlY2lzaW9uKHgpKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyYW5nZSk7XG5cblxuICAgICAgICAgICAgICAgIGNvbnN0IGxlZ2VuZFNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgICAgICAgICAgICAgICAgICAuZG9tYWluKFttaW4sIG1heF0pXG4gICAgICAgICAgICAgICAgICAgIC5yYW5nZShbMCwgd2lkdGhdKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHJhbmdlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF4aXMgPSBkMy5heGlzQm90dG9tKGxlZ2VuZFNjYWxlKVxuICAgICAgICAgICAgICAgICAgICAudGlja1NpemVPdXRlcigwKVxuICAgICAgICAgICAgICAgICAgICAudGlja0Zvcm1hdChkMy5mb3JtYXQoXCIuMWZcIikpXG4gICAgICAgICAgICAgICAgICAgIC50aWNrVmFsdWVzKHJhbmdlLnNsaWNlKDEpKVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBnLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHZhbHVlcylcbiAgICAgICAgICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgncmVjdCcpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGQgPT4gY29sb3JTY2FsZShkKSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgKHgsIGkpID0+IChsZWdlbmRTY2FsZShyYW5nZVtpICsgMV0pIHx8IHdpZHRoKSAtIGxlZ2VuZFNjYWxlKHgpKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneCcsIHggPT4gbGVnZW5kU2NhbGUoeCkpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgMClcbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgZy5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKC0wLjUsJHtoZWlnaHR9KWApXG4gICAgICAgICAgICAgICAgICAgIC5jYWxsKGF4aXMpXG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG5cbiAgICAgICAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICd4LWF4aXMnKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgwLCR7aCAtIHBhZGRpbmcgKiAyfSlgKVxuICAgICAgICAgICAgLmNhbGwoeEF4aXMpO1xuXG4gICAgICAgIHN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cignaWQnLCAneS1heGlzJylcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoJHtwYWRkaW5nfSwwKWApXG4gICAgICAgICAgICAuY2FsbCh5QXhpcyk7XG5cbiAgICAgICAgc3ZnLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJheGlzTGFiZWxcIilcbiAgICAgICAgICAgIC50ZXh0KCdZZWFycycpXG4gICAgICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ4XCIsICh3IC0gcGFkZGluZykgLyAyKVxuICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIGggLSBwYWRkaW5nICogMiArIDQwKTtcblxuICAgICAgICBzdmcuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImF4aXNMYWJlbFwiKVxuICAgICAgICAgICAgLnRleHQoJ01vbnRocycpXG4gICAgICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHJvdGF0ZSgtOTApYClcbiAgICAgICAgICAgIC5hdHRyKFwieFwiLCAtKGggLSBwYWRkaW5nICogMikgLyAyKVxuICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIDQwKTtcblxuXG4gICAgfSk7XG5cblxufVxuXG5cblxuIl19