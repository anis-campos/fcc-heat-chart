"use strict";

var dataUrl = "https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/global-temperature.json";
document.addEventListener("DOMContentLoaded", function () {
  var req = new XMLHttpRequest();
  req.open('GET', dataUrl, true);

  req.onreadystatechange = function () {
    var json;

    if (req.readyState === 4 && req.status === 200) {
      json = JSON.parse(req.responseText);
      setData(json);
    }
  };

  req.send();
});
var gradient = ["#313695", "#4575b4", "#74add1", "#abd9e9", "#e0f3f8", "#ffffbf", "#fee090", "#fdae61", "#f46d43", "#d73027", "#a50026"];
var months = ["january", "february", "march", "april", "may", "june", "july", "august", "september", "october", "november", "december"];
var h = 600,
    w = 1500,
    padding = 100;
d3.select('#holder').append('svg').attr('width', w).attr('height', h);
/**
 * Api object from FCC
 * @typedef {Object} ApiModel
 * @property {Number} year     - Year of the measurement
 * @property {Number} month    - Month of the measurement
 * @property {Number} variance - Variance of temperature with base year
 */

/**
 *
 * @param {Number} baseTemp
 * @param {[ApiModel]} dataset
 */

function setData(_ref) {
  var baseTemp = _ref.baseTemperature,
      dataset = _ref.monthlyVariance;

  /**
   *
   * @param {ApiModel} x
   * @return {Date}
   */
  var getDate = function getDate(x) {
    return new Date(x.year, x.month - 1, 1);
  };
  /**
   *
   * @param {ApiModel} x
   * @return {Number}
   */


  var getVariance = function getVariance(x) {
    return temperature(x.variance);
  };
  /**
   *
   * @param {Number} x
   * @return {Number}
   */


  var temperature = function temperature(x) {
    return baseTemp + x;
  };
  /**
   *
   * @param {number} x
   * @param {number} decimal
   * @return {number}
   */


  var precision = function precision(x) {
    var decimal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
    return Math.round(x * Math.pow(10, decimal)) / Math.pow(10, decimal);
  };
  /**
   *
   * @type {Date[]}
   */


  var xDomain = [d3.min(dataset, getDate), d3.max(dataset, getDate)];
  /**
   *
   * @type {Number[]}
   */

  var yDomain = [d3.min(dataset, getVariance), d3.max(dataset, getVariance)];
  d3.select("#description").text("".concat(xDomain[0].getFullYear(), " - ").concat(xDomain[1].getFullYear(), ": base temperature ").concat(baseTemp, "\u2103"));
  var xScale = d3.scaleTime().domain(xDomain).range([padding, w - padding]);
  var yScale = d3.scaleLinear().domain([0.5, 12.5]).range([0, h - padding * 2]);
  var colorScale = d3.scaleQuantile().domain(yDomain).range(gradient);
  var xAxis = d3.axisBottom(xScale).tickSizeOuter(0).tickArguments([d3.timeYear.every(10)]),
      yAxis = d3.axisLeft(yScale).tickSizeOuter(0) //.ticks(12)
  .tickFormat(function (val, index) {
    return months[index];
  });
  var cellHeight = (h - 2 * padding) / months.length;
  var cellOffset = cellHeight / 2;
  var tooltip = d3.select('#tooltip');
  d3.select('svg').call(function (svg) {
    svg.selectAll('rect').data(dataset).enter().append('rect').attr('data-month', function (d) {
      return d.month - 1;
    }).attr('data-temp', function (d) {
      return d.variance;
    }).attr('data-year', function (d) {
      return d.year;
    }).attr('class', "cell").style('fill', function (d) {
      return colorScale(temperature(d.variance));
    }).attr('width', 5).attr('height', cellHeight).attr('x', function (d) {
      return xScale(new Date(d.year, 0, 1));
    }).attr('y', function (d) {
      return yScale(d.month) - cellOffset;
    }).on('mouseover', function (d) {
      var _d3$event = d3.event,
          x = _d3$event.pageX,
          y = _d3$event.pageY;
      tooltip.style("display", "block");
      tooltip.style("left", x + 20 + "px");
      var v = precision(d.variance);
      tooltip.html("".concat(d.year, " - ").concat(months[d.month - 1], "<BR>").concat(precision(baseTemp + d.variance), "\u2103<BR> ").concat(v > 0 ? '+' : '').concat(v, "\u2103"));
      var height = tooltip.node().getBoundingClientRect().height;
      tooltip.style("top", y - parseInt(height / 2) + "px");
      tooltip.attr('data-year', d.year);
    }).on('mouseout', function () {
      tooltip.style("display", "none");
    });
    svg.append('g').attr("id", "legend").attr('transform', "translate(".concat(padding, ",").concat(h - padding, ")")).call(function (g) {
      var width = 400;
      var height = 30;
      var min = yDomain[0];
      var max = yDomain[1];
      var step = (max - min) / gradient.length;
      var range = d3.range(min, max, step).map(function (x) {
        return precision(x);
      });
      console.log(range);
      var legendScale = d3.scaleLinear().domain([min, max]).range([0, width]);
      var values = range;
      var axis = d3.axisBottom(legendScale).tickSizeOuter(0).tickFormat(d3.format(".1f")).tickValues(range.slice(1));
      g.selectAll('rect').data(values).enter().append('rect').style('fill', function (d) {
        return colorScale(d);
      }).attr('width', function (x, i) {
        return (legendScale(range[i + 1]) || width) - legendScale(x);
      }).attr('height', height).attr('x', function (x) {
        return legendScale(x);
      }).attr('y', 0);
      g.append('g').attr("transform", "translate(-0.5,".concat(height, ")")).call(axis);
    });
    svg.append("g").attr('id', 'x-axis').attr("transform", "translate(0,".concat(h - padding * 2, ")")).call(xAxis);
    svg.append("g").attr('id', 'y-axis').attr("transform", "translate(".concat(padding, ",0)")).call(yAxis);
    svg.append("text").attr("class", "axisLabel").text('Years').style("text-anchor", "middle").attr("x", (w - padding) / 2).attr("y", h - padding * 2 + 40);
    svg.append("text").attr("class", "axisLabel").text('Months').style("text-anchor", "middle").attr("transform", "rotate(-90)").attr("x", -(h - padding * 2) / 2).attr("y", 40);
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJkYXRhVXJsIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVxIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25yZWFkeXN0YXRlY2hhbmdlIiwianNvbiIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJzZXREYXRhIiwic2VuZCIsImdyYWRpZW50IiwibW9udGhzIiwiaCIsInciLCJwYWRkaW5nIiwiZDMiLCJzZWxlY3QiLCJhcHBlbmQiLCJhdHRyIiwiYmFzZVRlbXAiLCJiYXNlVGVtcGVyYXR1cmUiLCJkYXRhc2V0IiwibW9udGhseVZhcmlhbmNlIiwiZ2V0RGF0ZSIsIngiLCJEYXRlIiwieWVhciIsIm1vbnRoIiwiZ2V0VmFyaWFuY2UiLCJ0ZW1wZXJhdHVyZSIsInZhcmlhbmNlIiwicHJlY2lzaW9uIiwiZGVjaW1hbCIsIk1hdGgiLCJyb3VuZCIsInBvdyIsInhEb21haW4iLCJtaW4iLCJtYXgiLCJ5RG9tYWluIiwidGV4dCIsImdldEZ1bGxZZWFyIiwieFNjYWxlIiwic2NhbGVUaW1lIiwiZG9tYWluIiwicmFuZ2UiLCJ5U2NhbGUiLCJzY2FsZUxpbmVhciIsImNvbG9yU2NhbGUiLCJzY2FsZVF1YW50aWxlIiwieEF4aXMiLCJheGlzQm90dG9tIiwidGlja1NpemVPdXRlciIsInRpY2tBcmd1bWVudHMiLCJ0aW1lWWVhciIsImV2ZXJ5IiwieUF4aXMiLCJheGlzTGVmdCIsInRpY2tGb3JtYXQiLCJ2YWwiLCJpbmRleCIsImNlbGxIZWlnaHQiLCJsZW5ndGgiLCJjZWxsT2Zmc2V0IiwidG9vbHRpcCIsImNhbGwiLCJzdmciLCJzZWxlY3RBbGwiLCJkYXRhIiwiZW50ZXIiLCJkIiwic3R5bGUiLCJvbiIsImV2ZW50IiwicGFnZVgiLCJ5IiwicGFnZVkiLCJ2IiwiaHRtbCIsImhlaWdodCIsIm5vZGUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwYXJzZUludCIsImciLCJ3aWR0aCIsInN0ZXAiLCJtYXAiLCJjb25zb2xlIiwibG9nIiwibGVnZW5kU2NhbGUiLCJ2YWx1ZXMiLCJheGlzIiwiZm9ybWF0IiwidGlja1ZhbHVlcyIsInNsaWNlIiwiaSJdLCJtYXBwaW5ncyI6Ijs7QUFFQSxJQUFNQSxPQUFPLEdBQUcsb0dBQWhCO0FBQ0FDLFFBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDLFlBQVk7QUFDdEQsTUFBTUMsR0FBRyxHQUFHLElBQUlDLGNBQUosRUFBWjtBQUNBRCxFQUFBQSxHQUFHLENBQUNFLElBQUosQ0FBUyxLQUFULEVBQWdCTCxPQUFoQixFQUF5QixJQUF6Qjs7QUFDQUcsRUFBQUEsR0FBRyxDQUFDRyxrQkFBSixHQUF5QixZQUFZO0FBQ2pDLFFBQUlDLElBQUo7O0FBQ0EsUUFBSUosR0FBRyxDQUFDSyxVQUFKLEtBQW1CLENBQW5CLElBQXdCTCxHQUFHLENBQUNNLE1BQUosS0FBZSxHQUEzQyxFQUFnRDtBQUM1Q0YsTUFBQUEsSUFBSSxHQUFHRyxJQUFJLENBQUNDLEtBQUwsQ0FBV1IsR0FBRyxDQUFDUyxZQUFmLENBQVA7QUFDQUMsTUFBQUEsT0FBTyxDQUFDTixJQUFELENBQVA7QUFDSDtBQUNKLEdBTkQ7O0FBT0FKLEVBQUFBLEdBQUcsQ0FBQ1csSUFBSjtBQUNILENBWEQ7QUFhQSxJQUFNQyxRQUFRLEdBQUcsQ0FBQyxTQUFELEVBQVksU0FBWixFQUF1QixTQUF2QixFQUFrQyxTQUFsQyxFQUE2QyxTQUE3QyxFQUF3RCxTQUF4RCxFQUFtRSxTQUFuRSxFQUE4RSxTQUE5RSxFQUF5RixTQUF6RixFQUFvRyxTQUFwRyxFQUErRyxTQUEvRyxDQUFqQjtBQUNBLElBQU1DLE1BQU0sR0FBRyxDQUFDLFNBQUQsRUFBWSxVQUFaLEVBQXdCLE9BQXhCLEVBQWlDLE9BQWpDLEVBQTBDLEtBQTFDLEVBQWlELE1BQWpELEVBQXlELE1BQXpELEVBQWlFLFFBQWpFLEVBQTJFLFdBQTNFLEVBQXdGLFNBQXhGLEVBQW1HLFVBQW5H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dXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGQzIGZyb20gXCJAdHlwZXMvZDNcIjtcblxuY29uc3QgZGF0YVVybCA9IFwiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2ZyZWVDb2RlQ2FtcC9Qcm9qZWN0UmVmZXJlbmNlRGF0YS9tYXN0ZXIvZ2xvYmFsLXRlbXBlcmF0dXJlLmpzb25cIjtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICByZXEub3BlbignR0VUJywgZGF0YVVybCwgdHJ1ZSk7XG4gICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IGpzb247XG4gICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PT0gNCAmJiByZXEuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIGpzb24gPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgc2V0RGF0YShqc29uKVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXEuc2VuZCgpO1xufSk7XG5cbmNvbnN0IGdyYWRpZW50ID0gW1wiIzMxMzY5NVwiLCBcIiM0NTc1YjRcIiwgXCIjNzRhZGQxXCIsIFwiI2FiZDllOVwiLCBcIiNlMGYzZjhcIiwgXCIjZmZmZmJmXCIsIFwiI2ZlZTA5MFwiLCBcIiNmZGFlNjFcIiwgXCIjZjQ2ZDQzXCIsIFwiI2Q3MzAyN1wiLCBcIiNhNTAwMjZcIl07XG5jb25zdCBtb250aHMgPSBbXCJqYW51YXJ5XCIsIFwiZmVicnVhcnlcIiwgXCJtYXJjaFwiLCBcImFwcmlsXCIsIFwibWF5XCIsIFwianVuZVwiLCBcImp1bHlcIiwgXCJhdWd1c3RcIiwgXCJzZXB0ZW1iZXJcIiwgXCJvY3RvYmVyXCIsIFwibm92ZW1iZXJcIiwgXCJkZWNlbWJlclwiXTtcblxuY29uc3QgaCA9IDYwMCwgdyA9IDE1MDAsIHBhZGRpbmcgPSAxMDA7XG5cbmQzLnNlbGVjdCgnI2hvbGRlcicpXG4gICAgLmFwcGVuZCgnc3ZnJylcbiAgICAuYXR0cignd2lkdGgnLCB3KVxuICAgIC5hdHRyKCdoZWlnaHQnLCBoKTtcblxuLyoqXG4gKiBBcGkgb2JqZWN0IGZyb20gRkNDXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBcGlNb2RlbFxuICogQHByb3BlcnR5IHtOdW1iZXJ9IHllYXIgICAgIC0gWWVhciBvZiB0aGUgbWVhc3VyZW1lbnRcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBtb250aCAgICAtIE1vbnRoIG9mIHRoZSBtZWFzdXJlbWVudFxuICogQHByb3BlcnR5IHtOdW1iZXJ9IHZhcmlhbmNlIC0gVmFyaWFuY2Ugb2YgdGVtcGVyYXR1cmUgd2l0aCBiYXNlIHllYXJcbiAqL1xuXG4vKipcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gYmFzZVRlbXBcbiAqIEBwYXJhbSB7W0FwaU1vZGVsXX0gZGF0YXNldFxuICovXG5mdW5jdGlvbiBzZXREYXRhKHtiYXNlVGVtcGVyYXR1cmU6IGJhc2VUZW1wLCBtb250aGx5VmFyaWFuY2U6IGRhdGFzZXR9KSB7XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FwaU1vZGVsfSB4XG4gICAgICogQHJldHVybiB7RGF0ZX1cbiAgICAgKi9cbiAgICBjb25zdCBnZXREYXRlID0geCA9PiBuZXcgRGF0ZSh4LnllYXIsIHgubW9udGggLSAxLCAxKTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXBpTW9kZWx9IHhcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICovXG4gICAgY29uc3QgZ2V0VmFyaWFuY2UgPSB4ID0+IHRlbXBlcmF0dXJlKHgudmFyaWFuY2UpO1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0geFxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKi9cbiAgICBjb25zdCB0ZW1wZXJhdHVyZSA9IHggPT4gYmFzZVRlbXAgKyB4O1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWNpbWFsXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGNvbnN0IHByZWNpc2lvbiA9ICh4LCBkZWNpbWFsID0gMSkgPT4gTWF0aC5yb3VuZCh4ICogTWF0aC5wb3coMTAsIGRlY2ltYWwpKSAvIE1hdGgucG93KDEwLCBkZWNpbWFsKTtcblxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAdHlwZSB7RGF0ZVtdfVxuICAgICAqL1xuICAgIGNvbnN0IHhEb21haW4gPSBbZDMubWluKGRhdGFzZXQsIGdldERhdGUpLCBkMy5tYXgoZGF0YXNldCwgZ2V0RGF0ZSldO1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAdHlwZSB7TnVtYmVyW119XG4gICAgICovXG4gICAgY29uc3QgeURvbWFpbiA9IFtkMy5taW4oZGF0YXNldCwgZ2V0VmFyaWFuY2UpLCBkMy5tYXgoZGF0YXNldCwgZ2V0VmFyaWFuY2UpXTtcblxuICAgIGQzLnNlbGVjdChcIiNkZXNjcmlwdGlvblwiKS50ZXh0KGAke3hEb21haW5bMF0uZ2V0RnVsbFllYXIoKX0gLSAke3hEb21haW5bMV0uZ2V0RnVsbFllYXIoKX06IGJhc2UgdGVtcGVyYXR1cmUgJHtiYXNlVGVtcH3ihINgKTtcblxuICAgIGNvbnN0IHhTY2FsZSA9IGQzLnNjYWxlVGltZSgpXG4gICAgICAgIC5kb21haW4oeERvbWFpbilcbiAgICAgICAgLnJhbmdlKFtwYWRkaW5nLCB3IC0gcGFkZGluZ10pO1xuXG4gICAgY29uc3QgeVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgICAgICAuZG9tYWluKFswLjUsIDEyLjVdKVxuICAgICAgICAucmFuZ2UoWzAsIGggLSBwYWRkaW5nICogMl0pO1xuXG4gICAgY29uc3QgY29sb3JTY2FsZSA9IGQzLnNjYWxlUXVhbnRpbGUoKVxuICAgICAgICAuZG9tYWluKHlEb21haW4pXG4gICAgICAgIC5yYW5nZShncmFkaWVudCk7XG5cblxuICAgIGNvbnN0IHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4U2NhbGUpXG4gICAgICAgICAgICAudGlja1NpemVPdXRlcigwKVxuICAgICAgICAgICAgLnRpY2tBcmd1bWVudHMoW2QzLnRpbWVZZWFyLmV2ZXJ5KDEwKV0pLFxuXG4gICAgICAgIHlBeGlzID0gZDMuYXhpc0xlZnQoeVNjYWxlKVxuICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMClcbiAgICAgICAgICAgIC8vLnRpY2tzKDEyKVxuICAgICAgICAgICAgLnRpY2tGb3JtYXQoKHZhbCwgaW5kZXgpID0+IG1vbnRoc1tpbmRleF0pO1xuXG5cbiAgICBjb25zdCBjZWxsSGVpZ2h0ID0gKGggLSAyICogcGFkZGluZykgLyBtb250aHMubGVuZ3RoO1xuICAgIGNvbnN0IGNlbGxPZmZzZXQgPSBjZWxsSGVpZ2h0IC8gMjtcblxuICAgIGNvbnN0IHRvb2x0aXAgPSBkMy5zZWxlY3QoJyN0b29sdGlwJyk7XG5cbiAgICBkMy5zZWxlY3QoJ3N2ZycpLmNhbGwoc3ZnID0+IHtcblxuXG4gICAgICAgIHN2Zy5zZWxlY3RBbGwoJ3JlY3QnKVxuICAgICAgICAgICAgLmRhdGEoZGF0YXNldClcbiAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAgIC5hdHRyKCdkYXRhLW1vbnRoJywgZCA9PiBkLm1vbnRoIC0gMSlcbiAgICAgICAgICAgIC5hdHRyKCdkYXRhLXRlbXAnLCBkID0+IGQudmFyaWFuY2UpXG4gICAgICAgICAgICAuYXR0cignZGF0YS15ZWFyJywgZCA9PiBkLnllYXIpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCBcImNlbGxcIilcbiAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGQgPT4gY29sb3JTY2FsZSh0ZW1wZXJhdHVyZShkLnZhcmlhbmNlKSkpXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCA1KVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGNlbGxIZWlnaHQpXG4gICAgICAgICAgICAuYXR0cigneCcsIGQgPT4geFNjYWxlKG5ldyBEYXRlKGQueWVhciwgMCwgMSkpKVxuICAgICAgICAgICAgLmF0dHIoJ3knLCBkID0+IHlTY2FsZShkLm1vbnRoKSAtIGNlbGxPZmZzZXQpXG4gICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIChkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qge3BhZ2VYOiB4LCBwYWdlWTogeX0gPSBkMy5ldmVudDtcbiAgICAgICAgICAgICAgICB0b29sdGlwLnN0eWxlKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICAgICAgICAgIHRvb2x0aXAuc3R5bGUoXCJsZWZ0XCIsIHggKyAyMCArIFwicHhcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgdiA9IHByZWNpc2lvbihkLnZhcmlhbmNlKTtcbiAgICAgICAgICAgICAgICB0b29sdGlwLmh0bWwoYCR7ZC55ZWFyfSAtICR7bW9udGhzW2QubW9udGggLSAxXX08QlJcXD4ke3ByZWNpc2lvbihiYXNlVGVtcCArIGQudmFyaWFuY2UpfeKEgzxCUlxcPiAke3YgPiAwID8gJysnIDogJyd9JHt2feKEg2ApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHRvb2x0aXAubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcbiAgICAgICAgICAgICAgICB0b29sdGlwLnN0eWxlKFwidG9wXCIsIHkgLSBwYXJzZUludChoZWlnaHQgLyAyKSArIFwicHhcIik7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5hdHRyKCdkYXRhLXllYXInLCBkLnllYXIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9vbHRpcC5zdHlsZShcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICBzdmcuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgXCJsZWdlbmRcIilcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7cGFkZGluZ30sJHtoIC0gcGFkZGluZ30pYClcbiAgICAgICAgICAgIC5jYWxsKChnKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2lkdGggPSA0MDA7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gMzA7XG4gICAgICAgICAgICAgICAgY29uc3QgbWluID0geURvbWFpblswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXggPSB5RG9tYWluWzFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSAobWF4IC0gbWluKSAvIGdyYWRpZW50Lmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gZDMucmFuZ2UobWluLCBtYXgsIHN0ZXApLm1hcCh4ID0+IHByZWNpc2lvbih4KSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmFuZ2UpO1xuXG5cbiAgICAgICAgICAgICAgICBjb25zdCBsZWdlbmRTY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAgICAgICAgICAgICAgICAgLmRvbWFpbihbbWluLCBtYXhdKVxuICAgICAgICAgICAgICAgICAgICAucmFuZ2UoWzAsIHdpZHRoXSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSByYW5nZTtcbiAgICAgICAgICAgICAgICBjb25zdCBheGlzID0gZDMuYXhpc0JvdHRvbShsZWdlbmRTY2FsZSlcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMClcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoZDMuZm9ybWF0KFwiLjFmXCIpKVxuICAgICAgICAgICAgICAgICAgICAudGlja1ZhbHVlcyhyYW5nZS5zbGljZSgxKSlcbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgZy5zZWxlY3RBbGwoJ3JlY3QnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YSh2YWx1ZXMpXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBkID0+IGNvbG9yU2NhbGUoZCkpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsICh4LCBpKSA9PiAobGVnZW5kU2NhbGUocmFuZ2VbaSArIDFdKSB8fCB3aWR0aCkgLSBsZWdlbmRTY2FsZSh4KSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCB4ID0+IGxlZ2VuZFNjYWxlKHgpKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneScsIDApXG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGcuYXBwZW5kKCdnJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgtMC41LCR7aGVpZ2h0fSlgKVxuICAgICAgICAgICAgICAgICAgICAuY2FsbChheGlzKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgO1xuXG4gICAgICAgIHN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cignaWQnLCAneC1heGlzJylcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGB0cmFuc2xhdGUoMCwke2ggLSBwYWRkaW5nICogMn0pYClcbiAgICAgICAgICAgIC5jYWxsKHhBeGlzKTtcblxuICAgICAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ3ktYXhpcycpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBgdHJhbnNsYXRlKCR7cGFkZGluZ30sMClgKVxuICAgICAgICAgICAgLmNhbGwoeUF4aXMpO1xuXG4gICAgICAgIHN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYXhpc0xhYmVsXCIpXG4gICAgICAgICAgICAudGV4dCgnWWVhcnMnKVxuICAgICAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgICAgICAgIC5hdHRyKFwieFwiLCAodyAtIHBhZGRpbmcpIC8gMilcbiAgICAgICAgICAgIC5hdHRyKFwieVwiLCBoIC0gcGFkZGluZyAqIDIgKyA0MCk7XG5cbiAgICAgICAgc3ZnLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJheGlzTGFiZWxcIilcbiAgICAgICAgICAgIC50ZXh0KCdNb250aHMnKVxuICAgICAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGByb3RhdGUoLTkwKWApXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgLShoIC0gcGFkZGluZyAqIDIpIC8gMilcbiAgICAgICAgICAgIC5hdHRyKFwieVwiLCA0MCk7XG5cblxuICAgIH0pO1xuXG5cbn1cblxuXG5cbiJdfQ==